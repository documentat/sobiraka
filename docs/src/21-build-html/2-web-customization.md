# Кастомизация HTML

Чтобы привести внешний вид HTML-документации в соответствие с вашим фирменным стилем, необходимо создать _тему оформления HTML_. Это несложно: для начала достаточно создать [шаблон для рендеринга страниц](#template), при необходимости приложив к нему готовые [статические файлы](#static-files). Затем для более тонкого управления внешним видом элементов можно включить в тему [плагин на языке Python](#plugin). Также возможна автоматическая компиляция стилей из [файлов SASS](#sass).

Собирака загружает файлы из темы оформления, указанной в настройке [`web.theme`](../99-reference/1-configuration.md#volume.web.theme). Все файлы, кроме [шаблона для рендеринга страниц](#template), опциональны.

::: note
Документация, которую вы читаете сейчас, собрана с темой `book`. Можете найти её в исходниках Собираки и изучить как пример, когда будете разрабатывать собственную тему оформления.
:::

## Шаблон для рендеринга страниц {#template}

{% with %}
    {% set template_filename = 'web.html' %}
    {% set template_is_the_only_file = True %}
    {% set template_supports_search = True %}
    {% include 'html-template.md' %}
{% endwith %}

## Статические файлы {#static-files}

Директория `_static` должна содержать файлы, которые необходимы для правильного отображения темы в браузере. Чаще всего к таким файлам относятся стили, скрипты, изображения и шрифты.

В директорию с готовой документацией будет вложена полная копия директории `_static`. Относительный путь к ней будет доступен шаблону через переменную `STATIC`. Например, `{{ '{{STATIC}}' }}/logo.svg` преобразуется в путь наподобие `../_static/logo.svg`.

## Плагин для обработки страниц {#plugin}

В файле `theme.py` может быть определён _плагин_ — код на Python для дополнительной обработки содержимого перед рендерингом. В ряде случаев это позволяет снять часть ответственности со скриптов, выполняющихся в браузере, и перенести их логику в код, выполняющийся в момент сборки.

Класс плагина должен наследоваться от класса `sobiraka.processing.plugin.WebTheme`. Плагин имеет почти неограниченные возможности в рамках обработки отдельной страницы, см. [](../99-reference/4-plugin-api.md).

::: example
**Пример.** Предположим, что по задумке дизайнера горизонтальные и вертикальные картинки должны быть по-разному оформлены.

Добавив соответствующие проверки в код на Python, разработчик темы может добавить каждому блоку подходящий класс на этапе сборки документации. Аналогичный код в браузере пользователя не смог бы выполняться до загрузки картинок.
:::

## Файлы стилей SASS {#sass}

Если ваша тема оформления использует язык стилей [SASS](https://sass-lang.com/), Собирака может автоматически запускать препроцессор. Обратите внимание, что необходимая для этого команда `sass` не входит в Собираку и должна быть установлена отдельно.

Пути к исходным файлам CSS и конечным файлам SASS определяются словарём `sass_files` в коде плагина. Ключи словаря определяют пути к файлам SASS из директории темы, а значения определяют пути к создаваемому файлу CSS относительно директории `_static`.

::: example

**Пример.** С таким классом плагина Собирака прочитает файл `sass/styles.sass` из директории темы и преобразует его в файл `_static/css/style.css` в конечной директории.

```python
class MyWebTheme(WebTheme):
    def __init__(self, *args):
        super().__init__(*args)

        self.sass_files['sass/style.sass'] = 'css/style.css'
```

:::