# Директивы

Директивы — специальные конструкции, начинающиеся с символа `@` и вставленные отдельными абзацами. Директивы могут принимать аргументы, подобно программам в командной строке.

Собирака распознаёт директивы и её аргументы на одном из ранних этапов сборки, однако генерация контента, который подставится вместо директивы, происходит в конце сборки. Это позволяет генерировать контент на основе более полной информации как о текущей, так и обо всех других страницах документации.

## `@toc`

```
@toc [--local|--combined] [--depth DEPTH] [--format FORMAT]
```

Сгенерировать оглавление: иерархический список ссылок на разделы документации.

В зависимости от переданных опций, в список войдут:

- по умолчанию — ссылки на дочерние страницы;
- с опцией `--local` — ссылки на подразделы текущей страницы;
- с опцией `--combined` — ссылки на подразделы текущей страницы и на дочерние страницы.

Опция `--depth` определяет максимальную глубину оглавления. Например, `@toc --depth 1` сгенерирует ссылки на страницы или разделы строго одним уровнем ниже текущего.

Опция `--format` определяет формат отображения номера каждого раздела. Эта опция работает только в томах с включённой [автонумерацией](../11-overview/02-files.md#autonumeration).

## `@manual-toc`

```
@manual-toc [--local|--combined] [--depth DEPTH] [--ordered] [--unique]

@end-manual-toc
```

Эти директивы указывают начало и конец оглавления, составленного вручную. Такое оглавление может быть написано в любом стиле: например, оно может содержать произвольные пояснения у каждого элемента списка, или оно может вообще не быть списком. Единственное обязательное требование к такому оглавлению: оно обязано содержать те же ссылки, которые были бы сгенерированы с помощью [`@toc`](#toc).

Опции `--local`, `--combined` и `--depth` имеют тот же смысл, что у [`@toc`](#toc). Каждая из этих опций влияет на набор ссылок, которые Собирака ожидает увидеть в оглавлении и отсутствие которых будет считаться ошибкой.

Если указана опция `--ordered`, то Собирака проверит, чтобы все ссылки шли в правильном порядке.

Если указана опция `--unique`, то Собирака проверит, чтобы каждая из ожидаемых ссылок была указана ровно один раз.

::: note
**Пример.** В начале страницы [](1-links.md) в документации Собираки присутствует оглавление, составленное вручную. В нём в свободной форме перечислены все подразделы страницы, и с помощью директивы `@manual-toc` гарантируется, что это перечисление полное, в правильном порядке и без повторов. Посмотрите в исходный код документации, чтобы увидеть, как это сделано.
:::

## `@class`

```
@class NAME
```

Присвоить класс `NAME` следующему блочному элементу: абзацу, таблице, изображению и т.п. Сам по себе класс никак не влияет на отображение в финальном документе, но разработчик расширения может получить класс в коде Python через конструкцию `RT.CLASSES[id(elem)]` и выполнить ту или иную логику в соответствии с ним.

Например, с помощью классов и кода Python можно сделать так, чтобы некоторые изображения в документации отображались без рамки вокруг, а некоторые с рамкой. Ниже показан пример установки класса для изображения.

```
@class ImageWithBorder

![](screenshot.png)
```