# Конструкции Jinja

В исходном коде документации можно использовать любые [конструкции шаблонизатора Jinja](https://jinja.palletsprojects.com/en/3.1.x/templates/). Это позволяет, среди прочего, использовать переменные, условия и инклюды.

## Переменные {#variables}

{% raw %}
```jinja
Установите {{ PRODUCT }} {{ VERSION }} с сайта {{ WEBSITE }}.
```
{% endraw %}

Значения переменных можно вставлять в текст с помощью [двойных фигурных скобок](https://jinja.palletsprojects.com/en/3.1.x/templates/#variables).

По умолчанию доступны переменные из таблицы ниже. Вы можете добавить к этому списку собственные переменные на уровне тома или проекта с помощью настройки [`variables`](../5-reference/1-configuration.md#volume.variables).

|           |                                                                                          |
|-----------|------------------------------------------------------------------------------------------|
| `project` | Текущий проект.                                                                          |
| `volume`  | Текущий [том](../1-concepts/1-volumes.md).                                               |
| `page`    | Текущая страница.                                                                        |
| `LANG`    | Язык текущего тома.                                                                      |
| `HTML`    | Во время [сборки в HTML](../3-run/1-html.md) принимает значение `True`, иначе — `False`. |
| `PDF`     | Во время [сборки в PDF](../3-run/2-pdf.md) принимает значение `True`, иначе — `False`.   |

{% include 'unstable-api.md' %}

## Условия {#conditions}

{% raw %}
```jinja
{% if PDF %}
    Актуальная версия документации всегда доступна на сайте {{ WEBSITE }}.
{% end %}
```
{% endraw %}

Конструкция [`if`](https://jinja.palletsprojects.com/en/3.1.x/templates/#if) позволяет включать или выключать часть файла в зависимости от определённого условия. Одно из востребованных применений этой конструкции — внесение небольших изменений в текст в зависимости от конечного формата документации, то есть от переменных `HTML` и `PDF`.

Так, в примере выше внутрь PDF-документации вставляется ссылка на HTML-документацию, чтобы у читателя потенциально устаревшего файла была возможность перейти к более свежей версии.

Также конструкция может быть полезна для вставки дополнительных материалов, которые работают только в одном из форматов — например, видеороликов. Обратите внимание, что в таких ситуациях вы также можете использовать [низкоуровневый код](1-markdown.md#raw) в Pandoc Markdown.

## Инклюды {#includes}

{% raw %}
```jinja
{% include 'be-careful-when-performing-this-action.md' %}
```
{% endraw %}

Конструкция [`include`](https://jinja.palletsprojects.com/en/3.1.x/templates/#include) позволяет включить внутрь текущего документа фрагмент, хранящийся в отдельном файле. Включаемый файл должен храниться в директории, указанной в настройке [`paths.partials`](../5-reference/1-configuration.md#volume.paths.partials). Включаемый файл должен использовать тот же синтаксис, что и текущий файл.

Инклюды позволяют переиспользовать несколько раз один и тот же фрагмент, например, типовую формулировку предупреждения перед несколькими разными действиями.

Если текст фрагмента должен быть немного разным в разных местах, вы можете использовать в нём переменные Jinja. Чтобы передать переменную внутрь фрагмента, оберните `include` в конструкцию [`with`](https://jinja.palletsprojects.com/en/3.1.x/templates/#with-statement):

{% raw %}
```jinja
{% with action = 'Удаление профиля' %}
   {% include 'be-careful-when-performing-this-action.md' %}
{% endwith %}
```
{% endraw %}