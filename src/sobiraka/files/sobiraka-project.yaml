oneOf:
  - { $ref: '#/$defs/project' }

  - additionalProperties: false
    properties:
      primary_language:
        type: string
      languages:
        patternProperties:
          .+: { $ref: '#/$defs/project' }

  - additionalProperties: false
    properties:
      volumes:
        patternProperties:
          .+: { $ref: '#/$defs/project' }

  - additionalProperties: false
    properties:
      primary_language:
        type: string
      languages:
        patternProperties:
          .+:
            additionalProperties: false
            properties:
              volumes:
                patternProperties:
                  .+: { $ref: '#/$defs/project' }

$defs:
  project:
    additionalProperties: false
    properties:
      title: { type: string }

      paths:
        additionalProperties: false
        properties:
          root: { type: string }
          include:
            type: array
            minItems: 0
            items:
              type: string
          exclude:
            type: array
            minItems: 0
            items:
              type: string
          naming_scheme:
            type: array
            minItems: 0
            uniqueItems: true
            items:
              type: string
              format: regex
          resources: { type: string }
          partials: { type: string }

      content:
        additionalProperties: false
        properties:
          numeration: { type: boolean }

      html:
        additionalProperties: false
        properties:
          prefix: { type: string }
          resources_prefix: { type: string }
          resources_force_copy:
            type: array
            items:
              type: string
          theme: { type: string }
          theme_data: { type: object }
          toc_depth:
            oneOf:
              - type: integer
              - enum: [infinity]
          combined_toc:
            enum: [never, current, always]

      pdf:
        additionalProperties: false
        properties:
          header: { type: string }
          theme: { type: string }
          toc: { type: boolean }
          paths: { type: object }

      lint:
        additionalProperties: false
        properties:
          dictionaries:
            type: array
            minItems: 0
            uniqueItems: true
            items:
              type: string
          exceptions:
            type: array
            minItems: 0
            uniqueItems: true
            items:
              type: string
          checks:
            properties:
              phrases_must_begin_with_capitals: { type: boolean }

      variables:
        type: object
