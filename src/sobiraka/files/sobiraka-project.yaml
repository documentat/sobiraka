oneOf:
  - { $ref: '#/$defs/project' }

  - additionalProperties: false
    properties:
      primary_language:
        type: string
      languages:
        patternProperties:
          .+: { $ref: '#/$defs/project' }

  - additionalProperties: false
    properties:
      volumes:
        patternProperties:
          .+: { $ref: '#/$defs/project' }

  - additionalProperties: false
    properties:
      primary_language:
        type: string
      languages:
        patternProperties:
          .+:
            additionalProperties: false
            properties:
              volumes:
                patternProperties:
                  .+: { $ref: '#/$defs/project' }

$defs:
  project:
    additionalProperties: false
    properties:
      title: { type: string }

      paths:
        additionalProperties: false
        properties:
          root: { type: string }
          include:
            type: array
            minItems: 0
            items:
              type: string
          exclude:
            type: array
            minItems: 0
            items:
              type: string
          naming_scheme:
            type: array
            minItems: 0
            uniqueItems: true
            items:
              type: string
              format: regex
          resources: { type: string }
          partials: { type: string }

      content:
        additionalProperties: false
        properties:
          numeration: { type: boolean }

      html:
        additionalProperties: false
        properties:
          prefix: { type: string }
          resources_prefix: { type: string }
          resources_force_copy:
            type: array
            items:
              type: string
          theme: { type: string }
          theme_data: { type: object }
          toc_depth:
            oneOf:
              - type: integer
              - enum: [infinity]
          combined_toc:
            enum: [never, current, always]
          search:
            additionalProperties: false
            properties:
              engine:
                enum: [pagefind]
              index_path: { type: string }
              skip_elements:
                type: array
                uniqueItems: true
                items:
                  enum: [BlockQuote, BulletList, Caption, Citation, Cite, Code, CodeBlock, Definition, DefinitionItem, DefinitionList, Div, Doc, Emph, Header, HorizontalRule, Image, LineBlock, LineBreak, LineItem, Link, ListContainer, ListItem, Math, Note, Null, OrderedList, Para, Plain, Quoted, RawBlock, RawInline, SmallCaps, SoftBreak, Space, Span, Str, Strikeout, Strong, Subscript, Superscript, Table, TableBody, TableCell, TableFoot, TableHead, TableRow, Underline]
              link_target:
                enum: [h1, h2, h3, h4, h5, h6]
              translations:
                additionalProperties: false
                properties:
                  placeholder: { type: string }
                  clear_search: { type: string }
                  load_more: { type: string }
                  search_label: { type: string }
                  filters_label: { type: string }
                  zero_results: { type: string }
                  many_results: { type: string }
                  one_result: { type: string }
                  alt_search: { type: string }
                  search_suggestion: { type: string }
                  searching: { type: string }

      pdf:
        additionalProperties: false
        properties:
          header: { type: string }
          theme: { type: string }
          toc: { type: boolean }
          paths: { type: object }
          headers:
            properties:
              by_class:
                patternProperties:
                  .+: { type: string }
              by_element:
                patternProperties:
                  'h\d*': { type: string }
              by_page_level:
                patternProperties:
                  '[1-9]\d*': { type: string }
              by_global_level:
                patternProperties:
                  '[1-9]\d*': { type: string }

      lint:
        additionalProperties: false
        properties:
          dictionaries:
            type: array
            minItems: 0
            uniqueItems: true
            items:
              type: string
          exceptions:
            type: array
            minItems: 0
            uniqueItems: true
            items:
              type: string
          checks:
            properties:
              phrases_must_begin_with_capitals: { type: boolean }

      variables:
        type: object
